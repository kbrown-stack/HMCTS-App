<div class="page-header">
    <h2>Task Dashboard</h2>
    <a href="/tasks/create" class="btn btn-primary">Create New Task</a>
  </div>
  
  <div class="task-columns">
    <!-- Pending Tasks -->
    <div class="task-column">
      <h3>Pending</h3>
      <div class="task-list">
        <% 
        const pendingTasks = tasks.filter(task => task.status === 'pending');
        if (pendingTasks.length === 0) { 
        %>
          <p class="no-tasks">No pending tasks</p>
        <% } else { %>
          <% pendingTasks.forEach(task => { %>
            <div class="task-card status-pending">
              <h4 class="task-title"><%= task.title %></h4>
              <% if (task.description) { %>
                <p class="task-description"><%= task.description.length > 100 ? task.description.substring(0, 100) + '...' : task.description %></p>
              <% } %>
              <div class="task-meta">
                <span class="task-due">Due: <%= new Date(task.dueDate).toLocaleDateString() %></span>
              </div>
              <div class="task-actions">
                <a href="/tasks/view/<%= task._id %>" class="btn btn-sm btn-info">View</a>
                <a href="/tasks/edit/<%= task._id %>" class="btn btn-sm btn-warning">Edit</a>
                <form action="/tasks/delete/<%= task._id %>" method="POST" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this task?');">
                  <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            </div>
          <% }); %>
        <% } %>
      </div>
    </div>
    
    <!-- In Progress Tasks -->
    <div class="task-column">
      <h3>In Progress</h3>
      <div class="task-list">
        <% 
        const inProgressTasks = tasks.filter(task => task.status === 'in-progress');
        if (inProgressTasks.length === 0) { 
        %>
          <p class="no-tasks">No tasks in progress</p>
        <% } else { %>
          <% inProgressTasks.forEach(task => { %>
            <div class="task-card status-in-progress">
              <h4 class="task-title"><%= task.title %></h4>
              <% if (task.description) { %>
                <p class="task-description"><%= task.description.length > 100 ? task.description.substring(0, 100) + '...' : task.description %></p>
              <% } %>
              <div class="task-meta">
                <span class="task-due">Due: <%= new Date(task.dueDate).toLocaleDateString() %></span>
              </div>
              <div class="task-actions">
                <a href="/tasks/view/<%= task._id %>" class="btn btn-sm btn-info">View</a>
                <a href="/tasks/edit/<%= task._id %>" class="btn btn-sm btn-warning">Edit</a>
                <form action="/tasks/delete/<%= task._id %>" method="POST" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this task?');">
                  <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            </div>
          <% }); %>
        <% } %>
      </div>
    </div>
    
    <!-- Completed Tasks -->
    <div class="task-column">
      <h3>Completed</h3>
      <div class="task-list">
        <% 
        const completedTasks = tasks.filter(task => task.status === 'completed');
        if (completedTasks.length === 0) { 
        %>
          <p class="no-tasks">No completed tasks</p>
        <% } else { %>
          <% completedTasks.forEach(task => { %>
            <div class="task-card status-completed">
              <h4 class="task-title"><%= task.title %></h4>
              <% if (task.description) { %>
                <p class="task-description"><%= task.description.length >
                  100 ? task.description.substring(0, 100) + '...' : task.description %></p>
              <% } %>
              <div class="task-meta">
                <span class="task-due">Due: <%= new Date(task.dueDate).toLocaleDateString() %></span>
              </div>
              <div class="task-actions">
                <a href="/tasks/view/<%= task._id %>" class="btn btn-sm btn-info">View</a>
                <a href="/tasks/edit/<%= task._id %>" class="btn btn-sm btn-warning">Edit</a>
                <form action="/tasks/delete/<%= task._id %>" method="POST" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this task?');">
                  <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            </div>
          <% }); %>
        <% } %>
      </div>
    </div>
  </div>